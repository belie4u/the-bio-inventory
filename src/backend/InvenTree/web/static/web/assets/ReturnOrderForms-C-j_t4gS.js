import{r as o,i as a,j as t,ed as f,ee as x,ap as p,aL as _,bR as u,cG as h}from"./vendor-COjCG5sX.js";import{e as j,A as y,f as b,m as g}from"./index-ClP83spC.js";import{R as F}from"./RemoveRowButton-CcCl0sVr.js";import{b as v,T as R,S}from"./UseForm-DUtLE7-5.js";import{o as T}from"./InvenTreeTable-BLgfUICM.js";function C({duplicateOrderId:e}){const i=b();return o.useMemo(()=>{const s={reference:{},description:{},customer:{disabled:e!=null,filters:{is_customer:!0,active:!0}},customer_reference:{},project_code:{},order_currency:{},start_date:{icon:t.jsx(_,{})},target_date:{icon:t.jsx(_,{})},link:{},contact:{icon:t.jsx(p,{}),adjustFilters:r=>({...r.filters,company:r.data.customer})},address:{icon:t.jsx(x,{}),adjustFilters:r=>({...r.filters,company:r.data.customer})},responsible:{filters:{is_active:!0},icon:t.jsx(f,{})}};return e&&(s.duplicate={children:{order_id:{hidden:!0,value:e},copy_lines:{value:!1,hidden:!0},copy_extra_lines:{}}}),i.isSet("PROJECT_CODES_ENABLED",!0)||delete s.project_code,s},[e,i])}function L({orderId:e,customerId:i,create:s}){return o.useMemo(()=>({order:{disabled:!0,filters:{customer_detail:!0}},item:{filters:{customer:i,part_detail:!0}},quantity:{},reference:{},outcome:{hidden:s==!0},price:{},price_currency:{},target_date:{},notes:{},link:{}}),[s,e,i])}function k({props:e,record:i}){var d,l,c;const s=o.useMemo(()=>{var n;return((n=T(g.stockitem)())==null?void 0:n.map(m=>({value:m.value,display_name:m.label})))??[]},[]),r=o.useMemo(()=>{var n;return(n=i.item_detail)!=null&&n.serial&&i.quantity==1?`# ${i.item_detail.serial}`:i.quantity},[i.quantity,i.item_detail]);return t.jsx(t.Fragment,{children:t.jsxs(u.Tr,{children:[t.jsx(u.Td,{children:t.jsxs(h,{gap:"sm",align:"center",children:[t.jsx(R,{size:40,src:i.part_detail.thumbnail,align:"center"}),t.jsx("div",{children:i.part_detail.name})]})}),t.jsx(u.Td,{children:r}),t.jsx(u.Td,{children:t.jsx(S,{fieldDefinition:{field_type:"choice",label:a._({id:"uAQUqI"}),choices:s,onValueChange:n=>{e.changeFn(e.idx,"status",n)}},defaultValue:(d=i.item_detail)==null?void 0:d.status,error:(c=(l=e.rowErrors)==null?void 0:l.status)==null?void 0:c.message})}),t.jsx(u.Td,{children:t.jsx(F,{onClick:()=>e.removeFn(e.idx)})})]})})}function O(e){const i={id:{value:e.orderId,hidden:!0},items:{field_type:"table",value:e.items.map(s=>({item:s.pk})),modelRenderer:s=>{const r=e.items.find(d=>{var l;return d.pk==((l=s==null?void 0:s.item)==null?void 0:l.item)});return t.jsx(k,{props:s,record:r},r.pk)},headers:[{title:a._({id:"vgP+9p"}),style:{minWidth:"250px"}},{title:a._({id:"VbWX2u"}),style:{minWidth:"250px"}},{title:a._({id:"uAQUqI"}),style:{minWidth:"250px"}},{title:"",style:{width:"50px"}}]},location:{filters:{structural:!1}}};return v({url:j(y.return_order_receive,e.orderId),title:a._({id:"iwAbO1"}),fields:i,initialData:{location:null},size:"80%",onFormSuccess:e.onFormSuccess,successMessage:a._({id:"9U/ZsL"})})}export{L as a,O as b,C as u};
//# sourceMappingURL=ReturnOrderForms-C-j_t4gS.js.map
