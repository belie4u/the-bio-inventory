{"version":3,"file":"MFASetup-BxbD512i.js","sources":["../../../../../../frontend/src/pages/Auth/MFASetup.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport { Trans } from '@lingui/react/macro';\nimport { getTotpSecret, handleVerifyTotp } from '../../functions/auth';\nimport { Wrapper } from './Layout';\n\nimport { Button } from '@mantine/core';\nimport { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { QrRegistrationForm } from '../Index/Settings/AccountSettings/QrRegistrationForm';\n\nexport default function MFASetup() {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [totpQr, setTotpQr] = useState<{ totp_url: string; secret: string }>();\n  const [value, setValue] = useState('');\n\n  useEffect(() => {\n    getTotpSecret(setTotpQr);\n  }, []);\n\n  return (\n    <Wrapper titleText={t`MFA Setup Required`} logOff>\n      <QrRegistrationForm\n        url={totpQr?.totp_url ?? ''}\n        secret={totpQr?.secret ?? ''}\n        value={value}\n        setValue={setValue}\n      />\n      <Button\n        disabled={!value}\n        onClick={handleVerifyTotp(value, navigate, location)}\n      >\n        <Trans>Add TOTP</Trans>\n      </Button>\n    </Wrapper>\n  );\n}\n"],"names":["MFASetup","navigate","useNavigate","location","useLocation","totpQr","setTotpQr","useState","value","setValue","useEffect","getTotpSecret","jsxs","Wrapper","_i18n","_","id","jsx","QrRegistrationForm","totp_url","secret","Button","handleVerifyTotp","_Trans"],"mappings":"oUAUA,SAAwBA,GAAW,CACjC,MAAMC,EAAWC,EAAAA,EACXC,EAAWC,EAAAA,EAEX,CAACC,EAAQC,CAAS,EAAIC,WAAAA,EACtB,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,EAAE,EAErCG,OAAAA,EAAAA,UAAU,IAAM,CACdC,EAAcL,CAAS,CACzB,EAAG,CAAA,CAAE,EAGHM,EAAAA,KAACC,EAAA,CAAQ,UAAUC,EAAAC,EAAC,CAAAC,GAAA,QAAA,CAAoB,EAAG,OAAM,GAC/C,SAAA,CAAAC,EAAAA,IAACC,EAAA,CACC,KAAKb,GAAAA,YAAAA,EAAQc,WAAY,GACzB,QAAQd,GAAAA,YAAAA,EAAQe,SAAU,GAC1B,MAAAZ,EACA,SAAAC,CAAA,CAAmB,EAErBQ,EAAAA,IAACI,EAAA,CACC,SAAU,CAACb,EACX,QAASc,EAAiBd,EAAOP,EAAUE,CAAQ,EAEnD,SAAAc,EAAAA,IAAAM,EAAA,CAAAP,GAAA,SAAuB,CAAA,CACzB,CAAA,EACF,CAEJ"}