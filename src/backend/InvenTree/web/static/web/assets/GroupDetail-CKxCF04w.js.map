{"version":3,"file":"GroupDetail-CKxCF04w.js","sources":["../../../../../../frontend/src/pages/core/GroupDetail.tsx"],"sourcesContent":["import { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { t } from '@lingui/core/macro';\nimport { Paper, Skeleton, Stack } from '@mantine/core';\nimport { IconInfoCircle } from '@tabler/icons-react';\nimport { useMemo } from 'react';\nimport { useParams } from 'react-router-dom';\nimport {\n  type DetailsField,\n  DetailsTable\n} from '../../components/details/Details';\nimport { ItemDetailsGrid } from '../../components/details/ItemDetails';\nimport {} from '../../components/items/ActionDropdown';\nimport { RoleTable, type RuleSet } from '../../components/items/RoleTable';\nimport { StylishText } from '../../components/items/StylishText';\nimport InstanceDetail from '../../components/nav/InstanceDetail';\nimport { PageDetail } from '../../components/nav/PageDetail';\nimport type { PanelType } from '../../components/panels/Panel';\nimport { PanelGroup } from '../../components/panels/PanelGroup';\nimport {} from '../../hooks/UseForm';\nimport { useInstance } from '../../hooks/UseInstance';\n\n/**\n * Detail page for a single group\n */\nexport default function GroupDetail() {\n  const { id } = useParams();\n\n  const { instance, instanceQuery } = useInstance({\n    endpoint: ApiEndpoints.group_list,\n    pk: id\n  });\n\n  const detailsPanel = useMemo(() => {\n    if (instanceQuery.isFetching) {\n      return <Skeleton />;\n    }\n\n    const roles: RuleSet[] = instance?.roles ?? [];\n\n    const tl: DetailsField[] = [\n      {\n        type: 'text',\n        name: 'name',\n        label: t`Group Name`,\n        copy: true\n      }\n    ];\n\n    return (\n      <ItemDetailsGrid>\n        <DetailsTable fields={tl} item={instance} title={t`Group Details`} />\n        <Paper p='xs' withBorder>\n          <Stack gap='xs'>\n            <StylishText size='lg'>{t`Group Roles`}</StylishText>\n            <RoleTable roles={roles} />\n          </Stack>\n        </Paper>\n      </ItemDetailsGrid>\n    );\n  }, [instance, instanceQuery]);\n\n  const groupPanels: PanelType[] = useMemo(() => {\n    return [\n      {\n        name: 'detail',\n        label: t`Group Details`,\n        icon: <IconInfoCircle />,\n        content: detailsPanel\n      }\n    ];\n  }, [instance, id]);\n\n  return (\n    <InstanceDetail query={instanceQuery}>\n      <Stack gap='xs'>\n        <PageDetail\n          title={`${t`Group`}: ${instance.name}`}\n          imageUrl={instance?.image}\n          breadcrumbs={[\n            { name: t`System Overview`, url: '/core/' },\n            { name: t`Groups`, url: '/core/index/groups/' }\n          ]}\n          lastCrumb={[\n            { name: instance.name, url: `/core/group/${instance.pk}/` }\n          ]}\n        />\n        <PanelGroup\n          pageKey='group'\n          panels={groupPanels}\n          model={ModelType.group}\n          id={instance.pk}\n          instance={instance}\n          reloadInstance={instanceQuery.refetch}\n        />\n      </Stack>\n    </InstanceDetail>\n  );\n}\n"],"names":["GroupDetail","id","useParams","instance","instanceQuery","useInstance","endpoint","ApiEndpoints","group_list","pk","detailsPanel","useMemo","isFetching","Skeleton","roles","tl","type","name","label","_i18n","_","copy","ItemDetailsGrid","jsx","DetailsTable","Paper","jsxs","Stack","StylishText","RoleTable","groupPanels","icon","IconInfoCircle","content","InstanceDetail","PageDetail","image","url","PanelGroup","ModelType","group","refetch"],"mappings":"s4BAyBA,SAAwBA,GAAc,CACpC,KAAM,CAAEC,GAAAA,CAAAA,EAAOC,EAAAA,EAET,CAAEC,SAAAA,EAAUC,cAAAA,CAAAA,EAAkBC,EAAY,CAC9CC,SAAUC,EAAaC,WACvBC,GAAIR,CAAAA,CACL,EAEKS,EAAeC,EAAAA,QAAQ,IAAM,CACjC,GAAIP,EAAcQ,WAChB,aAAQC,EAAA,EAAQ,EAGlB,MAAMC,GAAmBX,GAAAA,YAAAA,EAAUW,QAAS,CAAA,EAEtCC,EAAqB,CACzB,CACEC,KAAM,OACNC,KAAM,OACNC,MAAKC,EAAAC,EAAE,CAAAnB,GAAA,QAAA,CAAY,EACnBoB,KAAM,EAAA,CACP,EAGH,cACGC,EAAA,CACC,SAAA,CAAAC,MAACC,GAAa,OAAQT,EAAI,KAAMZ,EAAU,MAAMgB,EAAAC,EAAC,CAAAnB,GAAA,QAAA,CAAe,EAAE,EAClEsB,EAAAA,IAACE,GAAM,EAAE,KAAK,WAAU,GACtB,SAAAC,EAAAA,KAACC,EAAA,CAAM,IAAI,KACT,SAAA,CAAAJ,EAAAA,IAACK,EAAA,CAAY,KAAK,KAAKT,SAAAA,EAAAC,EAAC,CAAAnB,GAAA,QAAA,CAAa,EAAE,EACvCsB,MAACM,GAAU,MAAAf,CAAA,CAAa,CAAA,CAAA,CAC1B,CAAA,CACF,CAAA,EACF,CAEJ,EAAG,CAACX,EAAUC,CAAa,CAAC,EAEtB0B,EAA2BnB,EAAAA,QAAQ,IAChC,CACL,CACEM,KAAM,SACNC,MAAKC,EAAAC,EAAE,CAAAnB,GAAA,QAAA,CAAe,EACtB8B,WAAOC,EAAA,EAAc,EACrBC,QAASvB,CAAAA,CACV,EAEF,CAACP,EAAUF,CAAE,CAAC,EAEjB,aACGiC,EAAA,CAAe,MAAO9B,EACrB,SAAAsB,EAAAA,KAACC,EAAA,CAAM,IAAI,KACT,SAAA,CAAAJ,EAAAA,IAACY,EAAA,CACC,MAAO,GAAAhB,EAAAC,EAAG,CAAAnB,GAAA,QAAA,CAAO,MAAME,EAASc,IAAI,GACpC,SAAUd,GAAAA,YAAAA,EAAUiC,MACpB,YAAa,CACX,CAAEnB,KAAIE,EAAAC,EAAE,CAAAnB,GAAA,QAAA,CAAiB,EAAGoC,IAAK,QAAA,EACjC,CAAEpB,KAAIE,EAAAC,EAAE,CAAAnB,GAAA,QAAA,CAAQ,EAAGoC,IAAK,qBAAA,CAAuB,EAEjD,UAAW,CACT,CAAEpB,KAAMd,EAASc,KAAMoB,IAAK,eAAelC,EAASM,EAAE,GAAA,CAAK,EAC3D,EAEJc,EAAAA,IAACe,EAAA,CACC,QAAQ,QACR,OAAQR,EACR,MAAOS,EAAUC,MACjB,GAAIrC,EAASM,GACb,SAAAN,EACA,eAAgBC,EAAcqC,OAAAA,CAAQ,CAAA,CAAA,CAE1C,CAAA,CACF,CAEJ"}