import{et as z,bP as A,r as x,j as a,G as p,bS as E,bL as I,cz as L,eu as N,D as T,cF as F,S as U,bQ as G,bU as M,bV as Q,i as m,d as R,ev as _,ah as $}from"./vendor-COjCG5sX.js";import{h as q,r as B,n as K,e as O}from"./index-ClP83spC.js";import{u as P}from"./DesktopAppView-DxQJo3T-.js";import{k as V}from"./UseForm-DUtLE7-5.js";import{a as Y,S as H}from"./ThemeContext-B85sS1BU.js";function ee({title:b,opened:l,onClose:j,selectedId:c,modelType:d,endpoint:w}){const k=P(),h=Y(),u=z(),t=A({enabled:l,queryKey:[d,l],queryFn:async()=>k.get(O(w),{data:{ordering:"level"}}).then(e=>e.data??[])}),S=x.useCallback((e,s)=>{const i=q(d,e.value);B(s)?K(i,h,s):(j(),h(i))},[d,h]),C=x.useMemo(()=>{var i,g;const e={},s=[];if(!t||!((i=t==null?void 0:t.data)!=null&&i.length))return[];for(let n=0;n<t.data.length;n++){const r={...t.data[n],children:[],label:a.jsxs(p,{gap:"xs",children:[a.jsx(V,{name:t.data[n].icon}),t.data[n].name]}),value:t.data[n].pk.toString(),selected:t.data[n].pk===c},v=r.pk,f=r.parent;if(f?(g=e[f])==null||g.children.push(r):s.push(r),e[v]=r,v===c){let o=e[r.parent];for(;o;)o.expanded=!0,o=e[o.parent]}}return s},[c,t.data]),D=x.useCallback(e=>a.jsxs(p,{p:3,justify:"left",wrap:"nowrap",onClick:()=>{e.hasChildren&&u.toggleExpanded(e.node.value)},children:[a.jsx(E,{w:3*e.level}),a.jsx(I,{size:"sm",variant:"transparent","aria-label":`nav-tree-toggle-${e.node.value}}`,children:e.hasChildren?e.expanded?a.jsx(L,{}):a.jsx(N,{}):null}),a.jsx(T,{onClick:s=>S(e.node,s),"aria-label":`nav-tree-item-${e.node.value}`,c:"var(--mantine-color-text)",children:e.node.label})]},e.node.value),[u]);return a.jsx(F,{opened:l,size:"md",position:"left",onClose:j,withCloseButton:!0,styles:{header:{width:"100%"},title:{width:"100%"}},title:a.jsxs(p,{justify:"left",p:"ms",gap:"md",wrap:"nowrap",children:[a.jsx($,{}),a.jsx(H,{size:"lg",children:b})]}),children:a.jsxs(U,{gap:"xs",children:[a.jsx(G,{}),a.jsx(M,{visible:t.isFetching||t.isLoading}),t.isError?a.jsx(Q,{color:"red",title:m._({id:"SlfejT"}),icon:a.jsx(R,{}),children:m._({id:"nY0zwD"})}):a.jsx(_,{data:C,tree:u,renderNode:D})]})})}export{ee as N};
//# sourceMappingURL=NavigationTree-C5wV9DDo.js.map
