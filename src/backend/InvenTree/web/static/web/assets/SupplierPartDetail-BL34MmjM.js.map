{"version":3,"file":"SupplierPartDetail-BL34MmjM.js","sources":["../../../../../../frontend/src/pages/company/SupplierPartDetail.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport { Grid, Skeleton, Stack } from '@mantine/core';\nimport {\n  IconCurrencyDollar,\n  IconInfoCircle,\n  IconPackages,\n  IconShoppingCart\n} from '@tabler/icons-react';\nimport { type ReactNode, useMemo } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport { formatDecimal } from '@lib/functions/Formatting';\nimport { getDetailUrl } from '@lib/functions/Navigation';\nimport AdminButton from '../../components/buttons/AdminButton';\nimport {\n  type DetailsField,\n  DetailsTable\n} from '../../components/details/Details';\nimport DetailsBadge from '../../components/details/DetailsBadge';\nimport { DetailsImage } from '../../components/details/DetailsImage';\nimport { ItemDetailsGrid } from '../../components/details/ItemDetails';\nimport {\n  BarcodeActionDropdown,\n  DeleteItemAction,\n  DuplicateItemAction,\n  EditItemAction,\n  OptionsActionDropdown\n} from '../../components/items/ActionDropdown';\nimport InstanceDetail from '../../components/nav/InstanceDetail';\nimport { PageDetail } from '../../components/nav/PageDetail';\nimport NotesPanel from '../../components/panels/NotesPanel';\nimport type { PanelType } from '../../components/panels/Panel';\nimport { PanelGroup } from '../../components/panels/PanelGroup';\nimport { useSupplierPartFields } from '../../forms/CompanyForms';\nimport {\n  useCreateApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useInstance } from '../../hooks/UseInstance';\nimport { useUserState } from '../../states/UserState';\nimport { PurchaseOrderTable } from '../../tables/purchasing/PurchaseOrderTable';\nimport SupplierPriceBreakTable from '../../tables/purchasing/SupplierPriceBreakTable';\nimport { StockItemTable } from '../../tables/stock/StockItemTable';\n\nexport default function SupplierPartDetail() {\n  const { id } = useParams();\n\n  const user = useUserState();\n\n  const navigate = useNavigate();\n\n  const {\n    instance: supplierPart,\n    instanceQuery,\n    refreshInstance\n  } = useInstance({\n    endpoint: ApiEndpoints.supplier_part_list,\n    pk: id,\n    hasPrimaryKey: true,\n    params: {\n      part_detail: true,\n      supplier_detail: true,\n      manufacturer_detail: true\n    }\n  });\n\n  const detailsPanel = useMemo(() => {\n    if (instanceQuery.isFetching) {\n      return <Skeleton />;\n    }\n\n    const data = supplierPart ?? {};\n\n    // Access nested data\n    data.manufacturer = data.manufacturer_detail?.pk;\n    data.MPN = data.manufacturer_part_detail?.MPN;\n    data.manufacturer_part = data.manufacturer_part_detail?.pk;\n\n    const tl: DetailsField[] = [\n      {\n        type: 'link',\n        name: 'part',\n        label: t`Internal Part`,\n        model: ModelType.part,\n        hidden: !supplierPart.part\n      },\n      {\n        type: 'string',\n        name: 'part_detail.IPN',\n        label: t`IPN`,\n        copy: true,\n        hidden: !data.part_detail?.IPN,\n        icon: 'serial'\n      },\n      {\n        type: 'string',\n        name: 'part_detail.description',\n        label: t`Part Description`,\n        copy: true,\n        icon: 'info',\n        hidden: !data.part_detail?.description\n      },\n      {\n        type: 'link',\n        external: true,\n        name: 'link',\n        label: t`External Link`,\n        copy: true,\n        hidden: !supplierPart.link\n      },\n      {\n        type: 'string',\n        name: 'note',\n        label: t`Note`,\n        copy: true,\n        hidden: !supplierPart.note\n      }\n    ];\n\n    const bl: DetailsField[] = [\n      {\n        type: 'link',\n        name: 'supplier',\n        label: t`Supplier`,\n        model: ModelType.company,\n        icon: 'suppliers',\n        hidden: !supplierPart.supplier\n      },\n      {\n        type: 'string',\n        name: 'SKU',\n        label: t`SKU`,\n        copy: true,\n        icon: 'reference'\n      },\n      {\n        type: 'string',\n        name: 'description',\n        label: t`Description`,\n        copy: true,\n        hidden: !data.description\n      },\n      {\n        type: 'link',\n        name: 'manufacturer',\n        label: t`Manufacturer`,\n        model: ModelType.company,\n        icon: 'manufacturers',\n        hidden: !data.manufacturer\n      },\n      {\n        type: 'link',\n        name: 'manufacturer_part',\n        model_field: 'MPN',\n        label: t`Manufacturer Part`,\n        model: ModelType.manufacturerpart,\n        icon: 'reference',\n        hidden: !data.manufacturer_part\n      }\n    ];\n\n    const br: DetailsField[] = [\n      {\n        type: 'string',\n        name: 'packaging',\n        label: t`Packaging`,\n        copy: true,\n        hidden: !data.packaging\n      },\n      {\n        type: 'string',\n        name: 'pack_quantity',\n        label: t`Pack Quantity`,\n        copy: true,\n        hidden: !data.pack_quantity,\n        icon: 'packages'\n      }\n    ];\n\n    const tr: DetailsField[] = [\n      {\n        type: 'number',\n        name: 'in_stock',\n        label: t`In Stock`,\n        copy: true,\n        icon: 'stock'\n      },\n      {\n        type: 'number',\n        name: 'on_order',\n        label: t`On Order`,\n        copy: true,\n        icon: 'purchase_orders'\n      },\n      {\n        type: 'string',\n        name: 'available',\n        label: t`Supplier Availability`,\n        hidden: !data.availability_updated,\n        copy: true,\n        icon: 'packages'\n      },\n      {\n        type: 'string',\n        name: 'availability_updated',\n        label: t`Availability Updated`,\n        copy: true,\n        hidden: !data.availability_updated,\n        icon: 'calendar'\n      }\n    ];\n\n    return (\n      <ItemDetailsGrid>\n        <Grid grow>\n          <DetailsImage\n            appRole={UserRoles.part}\n            src={supplierPart?.part_detail?.image}\n            apiPath={apiUrl(\n              ApiEndpoints.part_list,\n              supplierPart?.part_detail?.pk\n            )}\n            pk={supplierPart?.part_detail?.pk}\n          />\n          <Grid.Col span={8}>\n            <DetailsTable title={t`Part Details`} fields={tl} item={data} />\n          </Grid.Col>\n        </Grid>\n        <DetailsTable title={t`Supplier`} fields={bl} item={data} />\n        <DetailsTable title={t`Packaging`} fields={br} item={data} />\n        <DetailsTable title={t`Availability`} fields={tr} item={data} />\n      </ItemDetailsGrid>\n    );\n  }, [supplierPart, instanceQuery.isFetching]);\n\n  const panels: PanelType[] = useMemo(() => {\n    return [\n      {\n        name: 'details',\n        label: t`Supplier Part Details`,\n        icon: <IconInfoCircle />,\n        content: detailsPanel\n      },\n      {\n        name: 'stock',\n        label: t`Received Stock`,\n        icon: <IconPackages />,\n        content: supplierPart?.pk ? (\n          <StockItemTable\n            tableName='supplier-stock'\n            allowAdd={false}\n            params={{ supplier_part: supplierPart.pk }}\n          />\n        ) : (\n          <Skeleton />\n        )\n      },\n      {\n        name: 'purchaseorders',\n        label: t`Purchase Orders`,\n        icon: <IconShoppingCart />,\n        content: supplierPart?.pk ? (\n          <PurchaseOrderTable\n            supplierId={supplierPart.supplier}\n            supplierPartId={supplierPart.pk}\n          />\n        ) : (\n          <Skeleton />\n        )\n      },\n      {\n        name: 'pricing',\n        label: t`Supplier Pricing`,\n        icon: <IconCurrencyDollar />,\n        content: supplierPart?.pk ? (\n          <SupplierPriceBreakTable supplierPart={supplierPart} />\n        ) : (\n          <Skeleton />\n        )\n      },\n      NotesPanel({\n        model_type: ModelType.supplierpart,\n        model_id: supplierPart?.pk\n      })\n    ];\n  }, [supplierPart]);\n\n  const supplierPartActions = useMemo(() => {\n    return [\n      <AdminButton model={ModelType.supplierpart} id={supplierPart.pk} />,\n      <BarcodeActionDropdown\n        model={ModelType.supplierpart}\n        pk={supplierPart.pk}\n        hash={supplierPart.barcode_hash}\n        perm={user.hasChangeRole(UserRoles.purchase_order)}\n      />,\n      <OptionsActionDropdown\n        tooltip={t`Supplier Part Actions`}\n        actions={[\n          DuplicateItemAction({\n            hidden: !user.hasAddRole(UserRoles.purchase_order),\n            onClick: () => duplicateSupplierPart.open()\n          }),\n          EditItemAction({\n            hidden: !user.hasChangeRole(UserRoles.purchase_order),\n            onClick: () => editSupplierPart.open()\n          }),\n          DeleteItemAction({\n            hidden: !user.hasDeleteRole(UserRoles.purchase_order),\n            onClick: () => deleteSupplierPart.open()\n          })\n        ]}\n      />\n    ];\n  }, [user, supplierPart]);\n\n  const supplierPartFields = useSupplierPartFields({});\n\n  const editSupplierPart = useEditApiFormModal({\n    url: ApiEndpoints.supplier_part_list,\n    pk: supplierPart?.pk,\n    title: t`Edit Supplier Part`,\n    fields: supplierPartFields,\n    onFormSuccess: refreshInstance\n  });\n\n  const deleteSupplierPart = useDeleteApiFormModal({\n    url: ApiEndpoints.supplier_part_list,\n    pk: supplierPart?.pk,\n    title: t`Delete Supplier Part`,\n    onFormSuccess: () => {\n      navigate(getDetailUrl(ModelType.part, supplierPart.part));\n    }\n  });\n\n  const duplicateSupplierPart = useCreateApiFormModal({\n    url: ApiEndpoints.supplier_part_list,\n    title: t`Add Supplier Part`,\n    fields: supplierPartFields,\n    initialData: {\n      ...supplierPart\n    },\n    follow: true,\n    modelType: ModelType.supplierpart\n  });\n\n  const breadcrumbs = useMemo(() => {\n    return [\n      {\n        name: t`Purchasing`,\n        url: '/purchasing/'\n      },\n      {\n        name: supplierPart?.supplier_detail?.name ?? t`Supplier`,\n        url: `/purchasing/supplier/${supplierPart?.supplier_detail?.pk ?? ''}`\n      }\n    ];\n  }, [supplierPart]);\n\n  const badges: ReactNode[] = useMemo(() => {\n    return [\n      <DetailsBadge\n        label={t`Inactive`}\n        color='red'\n        visible={supplierPart.active == false}\n      />,\n      <DetailsBadge\n        label={`${t`In Stock`}: ${formatDecimal(supplierPart.in_stock)}`}\n        color={'green'}\n        visible={\n          supplierPart?.active &&\n          supplierPart?.in_stock &&\n          supplierPart?.in_stock > 0\n        }\n        key='in_stock'\n      />,\n      <DetailsBadge\n        label={t`No Stock`}\n        color={'red'}\n        visible={supplierPart.active && supplierPart.in_stock == 0}\n        key='no_stock'\n      />,\n      <DetailsBadge\n        label={`${t`On Order`}: ${formatDecimal(supplierPart.on_order)}`}\n        color='blue'\n        visible={supplierPart.on_order > 0}\n        key='on_order'\n      />\n    ];\n  }, [supplierPart]);\n\n  return (\n    <>\n      {deleteSupplierPart.modal}\n      {duplicateSupplierPart.modal}\n      {editSupplierPart.modal}\n      <InstanceDetail\n        query={instanceQuery}\n        requiredRole={UserRoles.purchase_order}\n      >\n        <Stack gap='xs'>\n          <PageDetail\n            title={t`Supplier Part`}\n            subtitle={`${supplierPart.SKU} - ${supplierPart?.part_detail?.name}`}\n            breadcrumbs={breadcrumbs}\n            lastCrumb={[\n              {\n                name: supplierPart.SKU,\n                url: `/purchasing/supplier-part/${supplierPart.pk}/`\n              }\n            ]}\n            badges={badges}\n            actions={supplierPartActions}\n            imageUrl={supplierPart?.part_detail?.thumbnail}\n            editAction={editSupplierPart.open}\n            editEnabled={user.hasChangePermission(ModelType.supplierpart)}\n          />\n          <PanelGroup\n            pageKey='supplierpart'\n            panels={panels}\n            instance={supplierPart}\n            reloadInstance={refreshInstance}\n            model={ModelType.supplierpart}\n            id={supplierPart.pk}\n          />\n        </Stack>\n      </InstanceDetail>\n    </>\n  );\n}\n"],"names":["SupplierPartDetail","id","useParams","user","useUserState","navigate","useNavigate","instance","supplierPart","instanceQuery","refreshInstance","useInstance","endpoint","ApiEndpoints","supplier_part_list","pk","hasPrimaryKey","params","part_detail","supplier_detail","manufacturer_detail","detailsPanel","useMemo","isFetching","Skeleton","data","manufacturer","MPN","manufacturer_part_detail","manufacturer_part","tl","type","name","label","_i18n","_","model","ModelType","part","hidden","copy","IPN","icon","description","external","link","note","bl","company","supplier","model_field","manufacturerpart","br","packaging","pack_quantity","tr","availability_updated","ItemDetailsGrid","jsxs","Grid","jsx","DetailsImage","UserRoles","image","apiUrl","part_list","DetailsTable","panels","IconInfoCircle","content","IconPackages","StockItemTable","supplier_part","IconShoppingCart","PurchaseOrderTable","IconCurrencyDollar","SupplierPriceBreakTable","NotesPanel","model_type","supplierpart","model_id","supplierPartActions","AdminButton","BarcodeActionDropdown","barcode_hash","hasChangeRole","purchase_order","OptionsActionDropdown","DuplicateItemAction","hasAddRole","onClick","duplicateSupplierPart","open","EditItemAction","editSupplierPart","DeleteItemAction","hasDeleteRole","deleteSupplierPart","supplierPartFields","useSupplierPartFields","useEditApiFormModal","url","title","fields","onFormSuccess","useDeleteApiFormModal","getDetailUrl","useCreateApiFormModal","initialData","follow","modelType","breadcrumbs","badges","DetailsBadge","active","formatDecimal","in_stock","on_order","Fragment","modal","InstanceDetail","Stack","PageDetail","SKU","thumbnail","hasChangePermission","PanelGroup"],"mappings":"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"}