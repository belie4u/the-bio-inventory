import{bP as A,r as m,j as e,bR as t,A as E,i as s,bk as I,G as f,dd as j,bL as g,d as N,bV as M,bT as c,bX as n}from"./vendor-COjCG5sX.js";import{S as _}from"./ThemeContext-B85sS1BU.js";import{a as S,e as p,A as h,b as R}from"./index-ClP83spC.js";import{f as w}from"./formatters-BZ5YEOyk.js";import{A as C}from"./ActionButton-DLsRvAT1.js";import{u as L,a as V,I as k}from"./InvenTreeTable-BLgfUICM.js";import{b as D,a as y}from"./UseForm-DUtLE7-5.js";import{k as B}from"./ColumnRenderers-g3zQL0h_.js";import"./DesktopAppView-DxQJo3T-.js";import"./index-dkDFLfDd.js";import"./QRCode-tr3h0Ayp.js";import"./browser-BL541dLs.js";import"./YesNoButton-DD4RFE30.js";function P({keys:a}){const{data:l,isLoading:x}=A({queryKey:["config"],queryFn:async()=>S.get(p(h.config_list)).then(r=>r.data)}),d=m.useMemo(()=>l?a.map(r=>({key:r,value:l.find(o=>o.key===r)})):[],[x,l,a]);return e.jsx("span",{children:e.jsxs(t,{withColumnBorders:!0,withTableBorder:!0,striped:!0,children:[e.jsx(t.Thead,{children:e.jsxs(t.Tr,{children:[e.jsx(t.Th,{children:e.jsx(E,{id:"EFKJQT"})}),e.jsx(t.Th,{children:e.jsx(E,{id:"wdxz7K"})}),e.jsx(t.Th,{children:e.jsx(E,{id:"+b7T3G"})})]})}),e.jsx(t.Tbody,{children:d.map(r=>{var o,u;return e.jsxs(t.Tr,{children:[e.jsx(t.Td,{children:r.key}),e.jsx(t.Td,{children:(o=r.value)==null?void 0:o.source}),e.jsx(t.Td,{children:w((u=r.value)==null?void 0:u.accessed,{showTime:!0})})]},r.key)})})]})})}function F({status:a}){switch(a){case"A":return e.jsx(c,{color:"blue",children:s._({id:"x7ymhZ"})});case"S":return e.jsx(c,{color:"blue",children:s._({id:"h69WC6"})});case"F":return e.jsx(c,{color:"red",children:s._({id:"7Bj3x9"})});case"D":return e.jsx(c,{color:"green",children:s._({id:"BTOhSm"})});case"R":return e.jsx(c,{color:"green",children:s._({id:"cQlPDN"})});case"C":return e.jsx(c,{color:"green",children:s._({id:"KNBs+p"})})}return"-"}function Q(){const a=D({url:h.email_test,title:s._({id:"89aQ3n"}),fields:{email:{}},successMessage:s._({id:"Xl929X"}),onFormSuccess:i=>{d.refreshTable()}}),l=R(),x=m.useMemo(()=>[e.jsx(C,{icon:e.jsx(I,{}),tooltip:s._({id:"89aQ3n"}),onClick:()=>a.open()},"test")],[]),d=L("emails","pk"),[r,o]=m.useState(""),u=y({url:h.email_list,pk:r,title:s._({id:"a3N6gf"}),successMessage:s._({id:"p7wv9/"}),table:d}),T=m.useMemo(()=>[{accessor:"subject",title:s._({id:"UJmAAK"}),sortable:!0},{accessor:"to",title:s._({id:"/jQctM"}),sortable:!0},{accessor:"sender",title:s._({id:"HW5fQk"}),sortable:!0},{accessor:"status",title:s._({id:"uAQUqI"}),sortable:!0,render:i=>e.jsxs(f,{justify:"space-between",children:[e.jsx(F,{status:i.status}),i.error_message&&e.jsxs(j,{children:[e.jsx(j.Target,{children:e.jsx(g,{color:"red",variant:"transparent",size:"sm",children:e.jsx(N,{})})}),e.jsx(j.Dropdown,{children:e.jsx(M,{color:"red",title:s._({id:"SlfejT"}),children:i.error_message})})]})]}),switchable:!0},{accessor:"direction",title:s._({id:"MRB7nI"}),sortable:!0,render:i=>i.direction==="incoming"?s._({id:"RAMaAx"}):s._({id:"O0Z2Xr"}),switchable:!0},B({accessor:"timestamp",title:s._({id:"8TMaZI"}),sortable:!0,switchable:!0,extra:{showTime:!0}})],[]),b=m.useCallback(i=>[V({onClick:()=>{o(i.pk),u.open()},hidden:!l.isStaff()})],[l]);return e.jsxs(e.Fragment,{children:[a.modal,u.modal,e.jsx(k,{tableState:d,url:p(h.email_list),columns:T,props:{rowActions:b,enableSearch:!0,enableColumnSwitching:!0,enableSelection:!0,enableBulkDelete:!0,tableActions:x}})]})}function $(){return e.jsxs(n,{multiple:!0,defaultValue:["emails"],children:[e.jsxs(n.Item,{value:"emails",children:[e.jsx(n.Control,{children:e.jsx(_,{size:"lg",children:s._({id:"VKLeoV"})})}),e.jsx(n.Panel,{children:e.jsx(Q,{})})]},"emails"),e.jsxs(n.Item,{value:"settings",children:[e.jsx(n.Control,{children:e.jsx(_,{size:"lg",children:s._({id:"Tz0i8g"})})}),e.jsx(n.Panel,{children:e.jsx(P,{keys:["INVENTREE_EMAIL_BACKEND","INVENTREE_EMAIL_HOST","INVENTREE_EMAIL_PORT","INVENTREE_EMAIL_USERNAME","INVENTREE_EMAIL_PASSWORD","INVENTREE_EMAIL_PREFIX","INVENTREE_EMAIL_TLS","INVENTREE_EMAIL_SSL","INVENTREE_EMAIL_SENDER"]},"email_settings")})]},"settings")]})}export{$ as default};
//# sourceMappingURL=EmailManagementPanel-BbROL0iA.js.map
