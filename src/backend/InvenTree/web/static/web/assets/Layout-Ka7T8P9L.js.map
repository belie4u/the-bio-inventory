{"version":3,"file":"Layout-Ka7T8P9L.js","sources":["../../../../../../frontend/src/components/SplashScreen.tsx","../../../../../../frontend/src/pages/Auth/Layout.tsx"],"sourcesContent":["import { BackgroundImage } from '@mantine/core';\nimport { useEffect } from 'react';\nimport { useShallow } from 'zustand/react/shallow';\nimport { generateUrl } from '../functions/urls';\nimport { useServerApiState } from '../states/ServerApiState';\nimport { useUserState } from '../states/UserState';\n\n/**\n * Render content within a \"splash screen\" container.\n */\nexport default function SplashScreen({\n  children\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  const [server, fetchServerApiState] = useServerApiState(\n    useShallow((state) => [state.server, state.fetchServerApiState])\n  );\n  const [checked_login] = useUserState(\n    useShallow((state) => [state.login_checked])\n  );\n\n  // Fetch server data on mount if no server data is present\n  useEffect(() => {\n    if (server.server === null) {\n      fetchServerApiState();\n    }\n  }, [server]);\n\n  if (server.customize?.splash && checked_login) {\n    return (\n      <BackgroundImage src={generateUrl(server.customize.splash)}>\n        {children}\n      </BackgroundImage>\n    );\n  } else {\n    return <>{children}</>;\n  }\n}\n","import { Trans } from '@lingui/react/macro';\nimport {\n  Button,\n  Center,\n  Container,\n  Divider,\n  Group,\n  Loader,\n  Paper,\n  Stack\n} from '@mantine/core';\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport SplashScreen from '../../components/SplashScreen';\nimport { StylishText } from '../../components/items/StylishText';\nimport { doLogout } from '../../functions/auth';\n\nexport default function LoginLayoutComponent() {\n  return (\n    <SplashScreen>\n      <Center mih='100vh' p='lg'>\n        <Container>\n          <Outlet />\n        </Container>\n      </Center>\n    </SplashScreen>\n  );\n}\n\nexport function Wrapper({\n  children,\n  titleText,\n  logOff = false,\n  loader = false,\n  smallPadding = false\n}: Readonly<{\n  children?: React.ReactNode;\n  titleText: string;\n  logOff?: boolean;\n  loader?: boolean;\n  smallPadding?: boolean;\n}>) {\n  const navigate = useNavigate();\n\n  return (\n    <Paper p='xl' withBorder miw={425} shadow='lg'>\n      <Stack gap={smallPadding ? 0 : 'md'}>\n        <StylishText size='xl'>{titleText}</StylishText>\n        <Divider p='xs' />\n        {loader && (\n          <Group justify='center'>\n            <Loader />\n          </Group>\n        )}\n        {children}\n        {logOff && (\n          <>\n            <Divider p='xs' />\n            <Button onClick={() => doLogout(navigate)} color='red'>\n              <Trans>Log off</Trans>\n            </Button>\n          </>\n        )}\n      </Stack>\n    </Paper>\n  );\n}\n"],"names":["SplashScreen","children","server","fetchServerApiState","useServerApiState","useShallow","state","checked_login","useUserState","login_checked","useEffect","customize","splash","jsx","BackgroundImage","generateUrl","LoginLayoutComponent","Center","Container","Outlet","Wrapper","titleText","logOff","loader","smallPadding","navigate","useNavigate","Paper","jsxs","Stack","StylishText","Divider","Group","Loader","Fragment","Button","doLogout","_Trans","id"],"mappings":"yPAUA,SAAwBA,EAAa,CACnCC,SAAAA,CAGD,EAAG,OACF,KAAM,CAACC,EAAQC,CAAmB,EAAIC,EACpCC,EAAYC,GAAU,CAACA,EAAMJ,OAAQI,EAAMH,mBAAmB,CAAC,CACjE,EACM,CAACI,CAAa,EAAIC,EACtBH,KAAsB,CAACC,EAAMG,aAAa,CAAC,CAC7C,EASA,OANAC,EAAAA,UAAU,IAAM,CACVR,EAAOA,SAAW,MACpBC,EAAAA,CAEJ,EAAG,CAACD,CAAM,CAAC,GAEPA,EAAAA,EAAOS,YAAPT,MAAAA,EAAkBU,QAAUL,EAE5BM,EAAAA,IAACC,GAAgB,IAAKC,EAAYb,EAAOS,UAAUC,MAAM,EACtDX,SAAAA,EACH,oBAGQA,SAAAA,EAAS,CAEvB,CCtBA,SAAwBe,GAAuB,CAC7C,OACEH,EAAAA,IAACb,EAAA,CACC,SAAAa,EAAAA,IAACI,EAAA,CAAO,IAAI,QAAQ,EAAE,KACpB,SAAAJ,EAAAA,IAACK,EAAA,CACC,SAAAL,EAAAA,IAACM,EAAA,EAAM,CAAA,CACT,EACF,EACF,CAEJ,CAEO,SAASC,EAAQ,CACtBnB,SAAAA,EACAoB,UAAAA,EACAC,OAAAA,EAAS,GACTC,OAAAA,EAAS,GACTC,aAAAA,EAAe,EAOhB,EAAG,CACF,MAAMC,EAAWC,EAAAA,EAEjB,OACEb,EAAAA,IAACc,EAAA,CAAM,EAAE,KAAK,WAAU,GAAC,IAAK,IAAK,OAAO,KACxC,SAAAC,EAAAA,KAACC,EAAA,CAAM,IAAKL,EAAe,EAAI,KAC7B,SAAA,CAAAX,EAAAA,IAACiB,EAAA,CAAY,KAAK,KAAMT,SAAAA,EAAU,EAClCR,EAAAA,IAACkB,EAAA,CAAQ,EAAE,IAAA,CAAI,EACdR,GACCV,EAAAA,IAACmB,EAAA,CAAM,QAAQ,SACb,SAAAnB,MAACoB,IAAM,EACT,EAEDhC,EACAqB,GACCM,EAAAA,KAAAM,WAAA,CACE,SAAA,CAAArB,EAAAA,IAACkB,EAAA,CAAQ,EAAE,IAAA,CAAI,EACflB,EAAAA,IAACsB,EAAA,CAAO,QAAS,IAAMC,EAASX,CAAQ,EAAG,MAAM,MAC/C,SAAAZ,EAAAA,IAAAwB,EAAA,CAAAC,GAAA,SAAsB,CAAA,CACxB,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAEJ"}