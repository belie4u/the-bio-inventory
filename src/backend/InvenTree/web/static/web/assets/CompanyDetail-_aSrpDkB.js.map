{"version":3,"file":"CompanyDetail-_aSrpDkB.js","sources":["../../../../../../frontend/src/tables/company/AddressTable.tsx","../../../../../../frontend/src/pages/company/CompanyDetail.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { AddItemButton } from '@lib/components/AddItemButton';\nimport {\n  type RowAction,\n  RowDeleteAction,\n  RowEditAction\n} from '@lib/components/RowActions';\nimport { YesNoButton } from '@lib/components/YesNoButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\nimport type { TableColumn } from '@lib/types/Tables';\nimport {\n  useCreateApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useTable } from '../../hooks/UseTable';\nimport { useUserState } from '../../states/UserState';\nimport { LinkColumn } from '../ColumnRenderers';\nimport { InvenTreeTable } from '../InvenTreeTable';\n\nexport function AddressTable({\n  companyId,\n  params\n}: Readonly<{\n  companyId: number;\n  params?: any;\n}>) {\n  const user = useUserState();\n\n  const table = useTable('address');\n\n  const columns: TableColumn[] = useMemo(() => {\n    return [\n      {\n        accessor: 'title',\n        sortable: true,\n        switchable: false\n      },\n      {\n        accessor: 'primary',\n        switchable: false,\n        sortable: false,\n        render: (record: any) => YesNoButton({ value: record.primary })\n      },\n      {\n        accessor: 'address',\n        title: t`Address`,\n        sortable: false,\n        switchable: false,\n        render: (record: any) => {\n          let address = '';\n\n          if (record?.line1) {\n            address += record.line1;\n          }\n\n          if (record?.line2) {\n            address += ` ${record.line2}`;\n          }\n\n          return address.trim();\n        }\n      },\n      {\n        accessor: 'postal_code',\n        sortable: false,\n        switchable: true\n      },\n      {\n        accessor: 'postal_city',\n        sortable: false,\n        switchable: true\n      },\n      {\n        accessor: 'province',\n        sortable: false,\n        switchable: true\n      },\n      {\n        accessor: 'country',\n        sortable: false,\n        switchable: true\n      },\n      {\n        accessor: 'shipping_notes',\n        sortable: false,\n        switchable: true\n      },\n      {\n        accessor: 'internal_shipping_notes',\n        sortable: false,\n        switchable: true\n      },\n      LinkColumn({})\n    ];\n  }, []);\n\n  const addressFields: ApiFormFieldSet = useMemo(() => {\n    return {\n      company: {},\n      title: {},\n      primary: {},\n      line1: {},\n      line2: {},\n      postal_code: {},\n      postal_city: {},\n      province: {},\n      country: {},\n      shipping_notes: {},\n      internal_shipping_notes: {},\n      link: {}\n    };\n  }, []);\n\n  const newAddress = useCreateApiFormModal({\n    url: ApiEndpoints.address_list,\n    title: t`Add Address`,\n    fields: addressFields,\n    initialData: {\n      company: companyId\n    },\n    successMessage: t`Address created`,\n    table: table\n  });\n\n  const [selectedAddress, setSelectedAddress] = useState<number>(-1);\n\n  const editAddress = useEditApiFormModal({\n    url: ApiEndpoints.address_list,\n    pk: selectedAddress,\n    title: t`Edit Address`,\n    fields: addressFields,\n    table: table\n  });\n\n  const deleteAddress = useDeleteApiFormModal({\n    url: ApiEndpoints.address_list,\n    pk: selectedAddress,\n    title: t`Delete Address`,\n    preFormWarning: t`Are you sure you want to delete this address?`,\n    table: table\n  });\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      const can_edit =\n        user.hasChangeRole(UserRoles.purchase_order) ||\n        user.hasChangeRole(UserRoles.sales_order);\n\n      const can_delete =\n        user.hasDeleteRole(UserRoles.purchase_order) ||\n        user.hasDeleteRole(UserRoles.sales_order);\n\n      return [\n        RowEditAction({\n          hidden: !can_edit,\n          onClick: () => {\n            setSelectedAddress(record.pk);\n            editAddress.open();\n          }\n        }),\n        RowDeleteAction({\n          hidden: !can_delete,\n          onClick: () => {\n            setSelectedAddress(record.pk);\n            deleteAddress.open();\n          }\n        })\n      ];\n    },\n    [user]\n  );\n\n  const tableActions = useMemo(() => {\n    const can_add =\n      user.hasChangeRole(UserRoles.purchase_order) ||\n      user.hasChangeRole(UserRoles.sales_order);\n\n    return [\n      <AddItemButton\n        key='add-address'\n        tooltip={t`Add Address`}\n        onClick={() => newAddress.open()}\n        hidden={!can_add}\n      />\n    ];\n  }, [user]);\n\n  return (\n    <>\n      {newAddress.modal}\n      {editAddress.modal}\n      {deleteAddress.modal}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.address_list)}\n        tableState={table}\n        columns={columns}\n        props={{\n          enableDownload: true,\n          rowActions: rowActions,\n          tableActions: tableActions,\n          params: {\n            ...params,\n            company: companyId\n          }\n        }}\n      />\n    </>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Grid, Skeleton, Stack } from '@mantine/core';\nimport {\n  IconBuildingWarehouse,\n  IconInfoCircle,\n  IconMap2,\n  IconPackageExport,\n  IconPackages,\n  IconShoppingCart,\n  IconTruckDelivery,\n  IconTruckReturn,\n  IconUsersGroup\n} from '@tabler/icons-react';\nimport { type ReactNode, useMemo } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport AdminButton from '../../components/buttons/AdminButton';\nimport { PrintingActions } from '../../components/buttons/PrintingActions';\nimport {\n  type DetailsField,\n  DetailsTable\n} from '../../components/details/Details';\nimport DetailsBadge from '../../components/details/DetailsBadge';\nimport { DetailsImage } from '../../components/details/DetailsImage';\nimport { ItemDetailsGrid } from '../../components/details/ItemDetails';\nimport {\n  DeleteItemAction,\n  EditItemAction,\n  OptionsActionDropdown\n} from '../../components/items/ActionDropdown';\nimport type { Breadcrumb } from '../../components/nav/BreadcrumbList';\nimport InstanceDetail from '../../components/nav/InstanceDetail';\nimport { PageDetail } from '../../components/nav/PageDetail';\nimport AttachmentPanel from '../../components/panels/AttachmentPanel';\nimport NotesPanel from '../../components/panels/NotesPanel';\nimport type { PanelType } from '../../components/panels/Panel';\nimport { PanelGroup } from '../../components/panels/PanelGroup';\nimport { companyFields } from '../../forms/CompanyForms';\nimport {\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useInstance } from '../../hooks/UseInstance';\nimport { useUserState } from '../../states/UserState';\nimport { AddressTable } from '../../tables/company/AddressTable';\nimport { ContactTable } from '../../tables/company/ContactTable';\nimport { ManufacturerPartTable } from '../../tables/purchasing/ManufacturerPartTable';\nimport { PurchaseOrderTable } from '../../tables/purchasing/PurchaseOrderTable';\nimport { SupplierPartTable } from '../../tables/purchasing/SupplierPartTable';\nimport { ReturnOrderTable } from '../../tables/sales/ReturnOrderTable';\nimport { SalesOrderTable } from '../../tables/sales/SalesOrderTable';\nimport { StockItemTable } from '../../tables/stock/StockItemTable';\n\nexport type CompanyDetailProps = {\n  title: string;\n  breadcrumbs: Breadcrumb[];\n  last_crumb_url: string;\n};\n\n/**\n * Detail view for a single company instance\n */\nexport default function CompanyDetail(props: Readonly<CompanyDetailProps>) {\n  const { id } = useParams();\n\n  const navigate = useNavigate();\n  const user = useUserState();\n\n  const {\n    instance: company,\n    refreshInstance,\n    instanceQuery\n  } = useInstance({\n    endpoint: ApiEndpoints.company_list,\n    pk: id,\n    params: {},\n    refetchOnMount: true\n  });\n\n  const detailsPanel = useMemo(() => {\n    if (instanceQuery.isFetching) {\n      return <Skeleton />;\n    }\n\n    const tl: DetailsField[] = [\n      {\n        type: 'text',\n        name: 'description',\n        label: t`Description`,\n        copy: true\n      },\n      {\n        type: 'link',\n        name: 'website',\n        label: t`Website`,\n        external: true,\n        copy: true,\n        hidden: !company.website\n      },\n      {\n        type: 'text',\n        name: 'phone',\n        label: t`Phone Number`,\n        copy: true,\n        hidden: !company.phone\n      },\n      {\n        type: 'text',\n        name: 'email',\n        label: t`Email Address`,\n        copy: true,\n        hidden: !company.email\n      },\n      {\n        type: 'text',\n        name: 'tax_id',\n        label: t`Tax ID`,\n        copy: true,\n        hidden: !company.tax_id\n      }\n    ];\n\n    const tr: DetailsField[] = [\n      {\n        type: 'string',\n        name: 'currency',\n        label: t`Default Currency`\n      },\n      {\n        type: 'boolean',\n        name: 'is_supplier',\n        label: t`Supplier`,\n        icon: 'suppliers'\n      },\n      {\n        type: 'boolean',\n        name: 'is_manufacturer',\n        label: t`Manufacturer`,\n        icon: 'manufacturers'\n      },\n      {\n        type: 'boolean',\n        name: 'is_customer',\n        label: t`Customer`,\n        icon: 'customers'\n      }\n    ];\n\n    return (\n      <ItemDetailsGrid>\n        <Grid grow>\n          <DetailsImage\n            appRole={UserRoles.purchase_order}\n            apiPath={apiUrl(ApiEndpoints.company_list, company.pk)}\n            src={company.image}\n            pk={company.pk}\n            refresh={refreshInstance}\n            imageActions={{\n              uploadFile: true,\n              downloadImage: true,\n              deleteFile: true\n            }}\n          />\n          <Grid.Col span={{ base: 12, sm: 8 }}>\n            <DetailsTable item={company} fields={tl} />\n          </Grid.Col>\n        </Grid>\n        <DetailsTable item={company} fields={tr} />\n      </ItemDetailsGrid>\n    );\n  }, [company, instanceQuery]);\n\n  const companyPanels: PanelType[] = useMemo(() => {\n    return [\n      {\n        name: 'details',\n        label: t`Company Details`,\n        icon: <IconInfoCircle />,\n        content: detailsPanel\n      },\n      {\n        name: 'supplied-parts',\n        label: t`Supplied Parts`,\n        icon: <IconPackageExport />,\n        hidden: !company?.is_supplier,\n        content: company?.pk && (\n          <SupplierPartTable params={{ supplier: company.pk }} />\n        )\n      },\n      {\n        name: 'manufactured-parts',\n        label: t`Manufactured Parts`,\n        icon: <IconBuildingWarehouse />,\n        hidden: !company?.is_manufacturer,\n        content: company?.pk && (\n          <ManufacturerPartTable params={{ manufacturer: company.pk }} />\n        )\n      },\n      {\n        name: 'purchase-orders',\n        label: t`Purchase Orders`,\n        icon: <IconShoppingCart />,\n        hidden: !company?.is_supplier,\n        content: company?.pk && <PurchaseOrderTable supplierId={company.pk} />\n      },\n      {\n        name: 'stock-items',\n        label: t`Stock Items`,\n        icon: <IconPackages />,\n        hidden: !company?.is_manufacturer && !company?.is_supplier,\n        content: company?.pk && (\n          <StockItemTable\n            allowAdd={false}\n            tableName='company-stock'\n            params={{ company: company.pk }}\n          />\n        )\n      },\n      {\n        name: 'sales-orders',\n        label: t`Sales Orders`,\n        icon: <IconTruckDelivery />,\n        hidden: !company?.is_customer,\n        content: company?.pk && <SalesOrderTable customerId={company.pk} />\n      },\n      {\n        name: 'return-orders',\n        label: t`Return Orders`,\n        icon: <IconTruckReturn />,\n        hidden: !company?.is_customer,\n        content: company.pk ? (\n          <ReturnOrderTable customerId={company.pk} />\n        ) : (\n          <Skeleton />\n        )\n      },\n      {\n        name: 'assigned-stock',\n        label: t`Assigned Stock`,\n        icon: <IconPackageExport />,\n        hidden: !company?.is_customer,\n        content: company?.pk ? (\n          <StockItemTable\n            allowAdd={false}\n            tableName='assigned-stock'\n            showLocation={false}\n            allowReturn\n            params={{ customer: company.pk }}\n          />\n        ) : (\n          <Skeleton />\n        )\n      },\n      {\n        name: 'contacts',\n        label: t`Contacts`,\n        icon: <IconUsersGroup />,\n        content: company?.pk && <ContactTable companyId={company.pk} />\n      },\n      {\n        name: 'addresses',\n        label: t`Addresses`,\n        icon: <IconMap2 />,\n        content: company?.pk && <AddressTable companyId={company.pk} />\n      },\n      AttachmentPanel({\n        model_type: ModelType.company,\n        model_id: company.pk\n      }),\n      NotesPanel({\n        model_type: ModelType.company,\n        model_id: company.pk\n      })\n    ];\n  }, [id, company, user]);\n\n  const editCompany = useEditApiFormModal({\n    url: ApiEndpoints.company_list,\n    pk: company?.pk,\n    title: t`Edit Company`,\n    fields: companyFields(),\n    onFormSuccess: refreshInstance\n  });\n\n  const deleteCompany = useDeleteApiFormModal({\n    url: ApiEndpoints.company_list,\n    pk: company?.pk,\n    title: t`Delete Company`,\n    onFormSuccess: () => {\n      navigate('/');\n    }\n  });\n\n  const companyActions = useMemo(() => {\n    return [\n      <AdminButton model={ModelType.company} id={company.pk} />,\n      <PrintingActions\n        modelType={ModelType.company}\n        items={[company.pk]}\n        enableReports\n      />,\n      <OptionsActionDropdown\n        tooltip={t`Company Actions`}\n        actions={[\n          EditItemAction({\n            hidden: !user.hasChangeRole(UserRoles.purchase_order),\n            onClick: () => editCompany.open()\n          }),\n          DeleteItemAction({\n            hidden: !user.hasDeleteRole(UserRoles.purchase_order),\n            onClick: () => deleteCompany.open()\n          })\n        ]}\n      />\n    ];\n  }, [id, company, user]);\n\n  const badges: ReactNode[] = useMemo(() => {\n    return [\n      <DetailsBadge\n        label={t`Inactive`}\n        color='red'\n        visible={company.active == false}\n      />\n    ];\n  }, [company]);\n\n  return (\n    <>\n      {editCompany.modal}\n      {deleteCompany.modal}\n      <InstanceDetail\n        query={instanceQuery}\n        requiredPermission={ModelType.company}\n      >\n        <Stack gap='xs'>\n          <PageDetail\n            title={`${t`Company`}: ${company.name}`}\n            subtitle={company.description}\n            actions={companyActions}\n            imageUrl={company.image}\n            breadcrumbs={props.breadcrumbs}\n            lastCrumb={[\n              {\n                name: company.name,\n                url: `${props.last_crumb_url}/${company.pk}/`\n              }\n            ]}\n            badges={badges}\n            editAction={editCompany.open}\n            editEnabled={user.hasChangePermission(ModelType.company)}\n          />\n          <PanelGroup\n            pageKey='company'\n            panels={companyPanels}\n            instance={company}\n            reloadInstance={refreshInstance}\n            model={ModelType.company}\n            id={company.pk}\n          />\n        </Stack>\n      </InstanceDetail>\n    </>\n  );\n}\n"],"names":["AddressTable","companyId","params","user","useUserState","table","useTable","columns","useMemo","accessor","sortable","switchable","render","record","YesNoButton","value","primary","title","_i18n","_","id","address","line1","line2","trim","LinkColumn","addressFields","company","postal_code","postal_city","province","country","shipping_notes","internal_shipping_notes","link","newAddress","useCreateApiFormModal","url","ApiEndpoints","address_list","fields","initialData","successMessage","selectedAddress","setSelectedAddress","useState","editAddress","useEditApiFormModal","pk","deleteAddress","useDeleteApiFormModal","preFormWarning","rowActions","useCallback","can_edit","hasChangeRole","UserRoles","purchase_order","sales_order","can_delete","hasDeleteRole","RowEditAction","hidden","onClick","open","RowDeleteAction","tableActions","can_add","jsx","AddItemButton","jsxs","Fragment","modal","InvenTreeTable","apiUrl","enableDownload","CompanyDetail","props","useParams","navigate","useNavigate","instance","refreshInstance","instanceQuery","useInstance","endpoint","company_list","refetchOnMount","detailsPanel","isFetching","Skeleton","tl","type","name","label","copy","external","website","phone","email","tax_id","tr","icon","ItemDetailsGrid","Grid","DetailsImage","image","uploadFile","downloadImage","deleteFile","base","sm","DetailsTable","companyPanels","IconInfoCircle","content","IconPackageExport","is_supplier","SupplierPartTable","supplier","IconBuildingWarehouse","is_manufacturer","ManufacturerPartTable","manufacturer","IconShoppingCart","PurchaseOrderTable","IconPackages","StockItemTable","IconTruckDelivery","is_customer","SalesOrderTable","IconTruckReturn","ReturnOrderTable","customer","IconUsersGroup","ContactTable","IconMap2","AttachmentPanel","model_type","ModelType","model_id","NotesPanel","editCompany","companyFields","onFormSuccess","deleteCompany","companyActions","AdminButton","PrintingActions","OptionsActionDropdown","EditItemAction","DeleteItemAction","badges","DetailsBadge","active","InstanceDetail","Stack","PageDetail","description","breadcrumbs","last_crumb_url","hasChangePermission","PanelGroup"],"mappings":"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"}