{"version":3,"file":"AuthenticationForm-xfrrPloR.js","sources":["../../../../../../frontend/src/components/buttons/SSOButton.tsx","../../../../../../frontend/src/components/forms/AuthenticationForm.tsx"],"sourcesContent":["import { Button, Tooltip } from '@mantine/core';\nimport {\n  IconBrandAzure,\n  IconBrandBitbucket,\n  IconBrandDiscord,\n  IconBrandFacebook,\n  IconBrandFlickr,\n  IconBrandGithub,\n  IconBrandGitlab,\n  IconBrandGoogle,\n  IconBrandReddit,\n  IconBrandTwitch,\n  IconBrandTwitter,\n  IconLogin\n} from '@tabler/icons-react';\n\nimport type { AuthProvider } from '@lib/types/Auth';\nimport { t } from '@lingui/core/macro';\nimport { ProviderLogin } from '../../functions/auth';\n\nimport type { JSX } from 'react';\n\nconst brandIcons: { [key: string]: JSX.Element } = {\n  google: <IconBrandGoogle />,\n  github: <IconBrandGithub />,\n  facebook: <IconBrandFacebook />,\n  discord: <IconBrandDiscord />,\n  twitter: <IconBrandTwitter />,\n  bitbucket: <IconBrandBitbucket />,\n  flickr: <IconBrandFlickr />,\n  gitlab: <IconBrandGitlab />,\n  reddit: <IconBrandReddit />,\n  twitch: <IconBrandTwitch />,\n  microsoft: <IconBrandAzure />\n};\n\nexport function SsoButton({ provider }: Readonly<{ provider: AuthProvider }>) {\n  return (\n    <Tooltip\n      label={t`You will be redirected to the provider for further actions.`}\n    >\n      <Button\n        leftSection={getBrandIcon(provider)}\n        radius='xl'\n        component='a'\n        onClick={() => ProviderLogin(provider)}\n      >\n        {provider.name}\n      </Button>\n    </Tooltip>\n  );\n}\nfunction getBrandIcon(provider: AuthProvider) {\n  return brandIcons[provider.id] || <IconLogin />;\n}\n","import { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { apiUrl } from '@lib/functions/Api';\nimport { t } from '@lingui/core/macro';\nimport { Trans } from '@lingui/react/macro';\nimport {\n  Alert,\n  Anchor,\n  Button,\n  Divider,\n  Group,\n  Loader,\n  PasswordInput,\n  Stack,\n  Text,\n  TextInput,\n  VisuallyHidden\n} from '@mantine/core';\nimport { useForm } from '@mantine/form';\nimport { useDisclosure } from '@mantine/hooks';\nimport { showNotification } from '@mantine/notifications';\nimport { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { useShallow } from 'zustand/react/shallow';\nimport { api } from '../../App';\nimport {\n  doBasicLogin,\n  doSimpleLogin,\n  ensureCsrf,\n  followRedirect\n} from '../../functions/auth';\nimport { showLoginNotification } from '../../functions/notifications';\nimport { useServerApiState } from '../../states/ServerApiState';\nimport { useUserState } from '../../states/UserState';\nimport { SsoButton } from '../buttons/SSOButton';\nimport { errorCodeLink } from '../nav/Alerts';\n\nexport function AuthenticationForm() {\n  const classicForm = useForm({\n    initialValues: { username: '', password: '', code: '' }\n  });\n  const simpleForm = useForm({ initialValues: { email: '' } });\n  const [classicLoginMode, setMode] = useDisclosure(true);\n  const [auth_config, sso_enabled, password_forgotten_enabled] =\n    useServerApiState(\n      useShallow((state) => [\n        state.auth_config,\n        state.sso_enabled,\n        state.password_forgotten_enabled\n      ])\n    );\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { isLoggedIn } = useUserState();\n\n  const [isLoggingIn, setIsLoggingIn] = useState<boolean>(false);\n\n  function handleLogin() {\n    setIsLoggingIn(true);\n\n    if (classicLoginMode === true) {\n      doBasicLogin(\n        classicForm.values.username,\n        classicForm.values.password,\n\n        navigate,\n        classicForm.values.code\n      )\n        .then((success) => {\n          setIsLoggingIn(false);\n\n          if (isLoggedIn()) {\n            showLoginNotification({\n              title: t`Login successful`,\n              message: t`Logged in successfully`\n            });\n            followRedirect(navigate, location?.state);\n          } else if (success) {\n            // MFA login\n          } else {\n            showLoginNotification({\n              title: t`Login failed`,\n              message: t`Check your input and try again.`,\n              success: false\n            });\n          }\n        })\n        .catch(() => {\n          showNotification({\n            title: t`Login failed`,\n            message: t`Check your input and try again.`,\n            color: 'red'\n          });\n        });\n    } else {\n      doSimpleLogin(simpleForm.values.email).then((ret) => {\n        setIsLoggingIn(false);\n\n        if (ret?.status === 'ok') {\n          showLoginNotification({\n            title: t`Mail delivery successful`,\n            message: t`Check your inbox for the login link. If you have an account, you will receive a login link. Check in spam too.`\n          });\n        } else {\n          showLoginNotification({\n            title: t`Mail delivery failed`,\n            message: t`Check your input and try again.`,\n            success: false\n          });\n        }\n      });\n    }\n  }\n\n  return (\n    <>\n      {sso_enabled() ? (\n        <>\n          <Group grow mb='md' mt='md'>\n            {auth_config?.socialaccount.providers.map((provider) => (\n              <SsoButton provider={provider} key={provider.id} />\n            ))}\n          </Group>\n\n          <Divider\n            label={t`Or continue with other methods`}\n            labelPosition='center'\n            my='lg'\n          />\n        </>\n      ) : null}\n      <form onSubmit={classicForm.onSubmit(() => {})}>\n        {classicLoginMode ? (\n          <Stack gap={0}>\n            <TextInput\n              required\n              label={t`Username`}\n              aria-label='login-username'\n              placeholder={t`Your username`}\n              {...classicForm.getInputProps('username')}\n            />\n            <PasswordInput\n              required\n              label={t`Password`}\n              aria-label='login-password'\n              placeholder={t`Your password`}\n              {...classicForm.getInputProps('password')}\n            />\n            <VisuallyHidden>\n              <TextInput\n                name='TOTP'\n                {...classicForm.getInputProps('code')}\n                hidden={true}\n              />\n            </VisuallyHidden>\n            {password_forgotten_enabled() === true && (\n              <Group justify='space-between' mt='0'>\n                <Anchor\n                  component='button'\n                  type='button'\n                  c='dimmed'\n                  size='xs'\n                  onClick={() => navigate('/reset-password')}\n                >\n                  <Trans>Reset password</Trans>\n                </Anchor>\n              </Group>\n            )}\n          </Stack>\n        ) : (\n          <Stack>\n            <TextInput\n              required\n              label={t`Email`}\n              description={t`We will send you a link to login - if you are registered`}\n              placeholder='email@example.org'\n              {...simpleForm.getInputProps('email')}\n            />\n          </Stack>\n        )}\n\n        <Group justify='space-between' mt='xl'>\n          <Anchor\n            component='button'\n            type='button'\n            c='dimmed'\n            size='xs'\n            onClick={() => setMode.toggle()}\n          >\n            {classicLoginMode ? (\n              <Trans>Send me an email</Trans>\n            ) : (\n              <Trans>Use username and password</Trans>\n            )}\n          </Anchor>\n          <Button type='submit' disabled={isLoggingIn} onClick={handleLogin}>\n            {isLoggingIn ? (\n              <Loader size='sm' />\n            ) : (\n              <>\n                {classicLoginMode ? (\n                  <Trans>Log In</Trans>\n                ) : (\n                  <Trans>Send Email</Trans>\n                )}\n              </>\n            )}\n          </Button>\n        </Group>\n      </form>\n    </>\n  );\n}\n\nexport function RegistrationForm() {\n  const registrationForm = useForm({\n    initialValues: {\n      username: '',\n      email: '',\n      password: '',\n      password2: '' as string | undefined\n    }\n  });\n  const navigate = useNavigate();\n  const [auth_config, registration_enabled, sso_registration] =\n    useServerApiState(\n      useShallow((state) => [\n        state.auth_config,\n        state.registration_enabled,\n        state.sso_registration_enabled\n      ])\n    );\n  const [isRegistering, setIsRegistering] = useState<boolean>(false);\n\n  async function handleRegistration() {\n    // check if passwords match\n    if (\n      registrationForm.values.password !== registrationForm.values.password2\n    ) {\n      registrationForm.setFieldError('password2', t`Passwords do not match`);\n      return;\n    }\n    setIsRegistering(true);\n\n    // remove password2 from the request\n    const { password2, ...vals } = registrationForm.values;\n    await ensureCsrf();\n\n    api\n      .post(apiUrl(ApiEndpoints.auth_signup), vals, {\n        headers: { Authorization: '' }\n      })\n      .then((ret) => {\n        if (ret?.status === 200) {\n          setIsRegistering(false);\n          showLoginNotification({\n            title: t`Registration successful`,\n            message: t`Please confirm your email address to complete the registration`\n          });\n          navigate('/home');\n        }\n      })\n      .catch((err) => {\n        if (err.response?.status === 400) {\n          setIsRegistering(false);\n\n          // collect all errors per field\n          const errors: { [key: string]: string[] } = {};\n          for (const val of err.response.data.errors) {\n            if (!errors[val.param]) {\n              errors[val.param] = [];\n            }\n            errors[val.param].push(val.message);\n          }\n\n          for (const key in errors) {\n            registrationForm.setFieldError(key, errors[key]);\n          }\n\n          showLoginNotification({\n            title: t`Input error`,\n            message: t`Check your input and try again. `,\n            success: false\n          });\n        }\n      });\n  }\n\n  const both_reg_enabled = registration_enabled() && sso_registration();\n  return (\n    <>\n      {registration_enabled() && (\n        <form onSubmit={registrationForm.onSubmit(() => {})}>\n          <Stack gap={0}>\n            <TextInput\n              required\n              label={t`Username`}\n              aria-label='register-username'\n              placeholder={t`Your username`}\n              {...registrationForm.getInputProps('username')}\n            />\n            <TextInput\n              required\n              label={t`Email`}\n              aria-label='register-email'\n              description={t`This will be used for a confirmation`}\n              placeholder='email@example.org'\n              {...registrationForm.getInputProps('email')}\n            />\n            <PasswordInput\n              required\n              label={t`Password`}\n              aria-label='register-password'\n              placeholder={t`Your password`}\n              {...registrationForm.getInputProps('password')}\n            />\n            <PasswordInput\n              required\n              label={t`Password repeat`}\n              aria-label='register-password-repeat'\n              placeholder={t`Repeat password`}\n              {...registrationForm.getInputProps('password2')}\n            />\n          </Stack>\n\n          <Group justify='space-between' mt='xl'>\n            <Button\n              type='submit'\n              disabled={isRegistering}\n              onClick={handleRegistration}\n              fullWidth\n            >\n              <Trans>Register</Trans>\n            </Button>\n          </Group>\n        </form>\n      )}\n      {both_reg_enabled && (\n        <Divider label={t`Or use SSO`} labelPosition='center' my='lg' />\n      )}\n      {sso_registration() && (\n        <Group grow mb='md' mt='md'>\n          {auth_config?.socialaccount.providers.map((provider) => (\n            <SsoButton provider={provider} key={provider.id} />\n          ))}\n        </Group>\n      )}\n      {!registration_enabled() && !sso_registration() && (\n        <Alert title={t`Registration not active`} color='orange'>\n          <Text>{t`This might be related to missing mail settings or could be a deliberate decision.`}</Text>\n          {errorCodeLink('INVE-W11')}\n        </Alert>\n      )}\n    </>\n  );\n}\n"],"names":["brandIcons","google","IconBrandGoogle","github","IconBrandGithub","facebook","IconBrandFacebook","discord","IconBrandDiscord","twitter","IconBrandTwitter","bitbucket","IconBrandBitbucket","flickr","IconBrandFlickr","gitlab","IconBrandGitlab","reddit","IconBrandReddit","twitch","IconBrandTwitch","microsoft","IconBrandAzure","SsoButton","provider","jsx","Tooltip","_i18n","_","id","Button","getBrandIcon","ProviderLogin","name","IconLogin","AuthenticationForm","classicForm","useForm","initialValues","username","password","code","simpleForm","email","classicLoginMode","setMode","useDisclosure","auth_config","sso_enabled","password_forgotten_enabled","useServerApiState","useShallow","state","navigate","useNavigate","location","useLocation","isLoggedIn","useUserState","isLoggingIn","setIsLoggingIn","useState","handleLogin","doBasicLogin","values","then","success","showLoginNotification","title","message","followRedirect","catch","showNotification","color","doSimpleLogin","ret","status","jsxs","Fragment","Group","socialaccount","providers","map","Divider","onSubmit","Stack","TextInput","getInputProps","PasswordInput","VisuallyHidden","Anchor","_Trans","toggle","Loader","RegistrationForm","registrationForm","password2","registration_enabled","sso_registration","sso_registration_enabled","isRegistering","setIsRegistering","handleRegistration","setFieldError","vals","ensureCsrf","api","post","apiUrl","ApiEndpoints","auth_signup","headers","Authorization","err","response","errors","val","data","param","push","key","both_reg_enabled","Alert","Text","errorCodeLink"],"mappings":"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"}