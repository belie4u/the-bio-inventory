{"version":3,"file":"DetailDrawer-kGftlqB0.js","sources":["../../../../../../frontend/src/components/nav/DetailDrawer.tsx"],"sourcesContent":["import { ActionIcon, Divider, Drawer, Group, Stack, Text } from '@mantine/core';\nimport { IconChevronLeft } from '@tabler/icons-react';\nimport { useCallback, useMemo } from 'react';\nimport { Link, Route, Routes, useNavigate, useParams } from 'react-router-dom';\nimport type { To } from 'react-router-dom';\n\nimport type { UiSizeType } from '@lib/types/Core';\nimport { useShallow } from 'zustand/react/shallow';\nimport { useLocalState } from '../../states/LocalState';\nimport { StylishText } from '../items/StylishText';\nimport * as classes from './DetailDrawer.css';\n\n/**\n * @param title - drawer title\n * @param position - drawer position\n * @param renderContent - function used to render the drawer content\n * @param urlPrefix - set an additional url segment, useful when multiple drawers are rendered on one page (e.g. \"user/\")\n */\nexport interface DrawerProps {\n  title: string;\n  position?: 'right' | 'left';\n  renderContent: (id?: string) => React.ReactNode;\n  urlPrefix?: string;\n  size?: UiSizeType;\n  closeOnEscape?: boolean;\n}\n\nfunction DetailDrawerComponent({\n  title,\n  position = 'right',\n  size,\n  closeOnEscape = true,\n  renderContent\n}: Readonly<DrawerProps>) {\n  const navigate = useNavigate();\n  const { id } = useParams();\n\n  const content = renderContent(id);\n  const opened = useMemo(() => !!id && !!content, [id, content]);\n\n  const [detailDrawerStack, addDetailDrawer] = useLocalState(\n    useShallow((state) => [state.detailDrawerStack, state.addDetailDrawer])\n  );\n\n  return (\n    <Drawer\n      opened={opened}\n      onClose={() => {\n        navigate('../');\n        addDetailDrawer(false);\n      }}\n      position={position}\n      closeOnEscape={closeOnEscape}\n      size={size}\n      classNames={{ root: classes.flex, body: classes.flex }}\n      scrollAreaComponent={Stack}\n      title={\n        <Group>\n          {detailDrawerStack > 0 && (\n            <ActionIcon\n              variant='outline'\n              onClick={() => {\n                navigate(-1);\n                addDetailDrawer(-1);\n              }}\n            >\n              <IconChevronLeft />\n            </ActionIcon>\n          )}\n          <StylishText size='xl'>{title}</StylishText>\n        </Group>\n      }\n    >\n      <Stack gap={'xs'} className={classes.flex}>\n        <Divider />\n        {content}\n      </Stack>\n    </Drawer>\n  );\n}\n\nexport function DetailDrawer(props: Readonly<DrawerProps>) {\n  return (\n    <Routes>\n      <Route path=':id?/' element={<DetailDrawerComponent {...props} />} />\n    </Routes>\n  );\n}\n\nexport function DetailDrawerLink({\n  to,\n  text\n}: Readonly<{ to: To; text: string }>) {\n  const addDetailDrawer = useLocalState(\n    useShallow((state) => state.addDetailDrawer)\n  );\n\n  const onNavigate = useCallback(() => {\n    addDetailDrawer(1);\n  }, [addDetailDrawer]);\n\n  return (\n    <Link to={to} onClick={onNavigate}>\n      <Text>{text}</Text>\n    </Link>\n  );\n}\n"],"names":["DetailDrawerComponent","title","position","size","closeOnEscape","renderContent","navigate","useNavigate","id","useParams","content","opened","useMemo","detailDrawerStack","addDetailDrawer","useLocalState","useShallow","state","jsx","Drawer","root","classes","body","flex","Stack","Group","ActionIcon","IconChevronLeft","StylishText","jsxs","Divider","DetailDrawer","props","Routes","Route","DetailDrawerLink","to","text","onNavigate","useCallback","Link","Text"],"mappings":"kSA2BA,SAASA,EAAsB,CAC7BC,MAAAA,EACAC,SAAAA,EAAW,QACXC,KAAAA,EACAC,cAAAA,EAAgB,GAChBC,cAAAA,CACqB,EAAG,CACxB,MAAMC,EAAWC,EAAAA,EACX,CAAEC,GAAAA,CAAAA,EAAOC,EAAAA,EAETC,EAAUL,EAAcG,CAAE,EAC1BG,EAASC,UAAQ,IAAM,CAAC,CAACJ,GAAM,CAAC,CAACE,EAAS,CAACF,EAAIE,CAAO,CAAC,EAEvD,CAACG,EAAmBC,CAAe,EAAIC,EAC3CC,EAAYC,GAAU,CAACA,EAAMJ,kBAAmBI,EAAMH,eAAe,CAAC,CACxE,EAEA,OACEI,EAAAA,IAACC,EAAA,CACC,OAAAR,EACA,QAAS,IAAM,CACbL,EAAS,KAAK,EACdQ,EAAgB,EAAK,CACvB,EACA,SAAAZ,EACA,cAAAE,EACA,KAAAD,EACA,WAAY,CAAEiB,KAAMC,EAAcC,KAAMD,CAAQE,EAChD,oBAAqBC,EACrB,aACGC,EAAA,CACEZ,SAAAA,CAAAA,EAAoB,GACnBK,MAACQ,EAAA,CACC,QAAQ,UACR,QAAS,IAAM,CACbpB,EAAS,EAAE,EACXQ,EAAgB,EAAE,CACpB,EAEA,SAAAI,EAAAA,IAACS,EAAA,CAAA,CAAe,CAAA,CAClB,EAEFT,EAAAA,IAACU,EAAA,CAAY,KAAK,KAAM3B,SAAAA,CAAAA,CAAM,CAAA,EAChC,EAGF,SAAA4B,EAAAA,KAACL,EAAA,CAAM,IAAK,KAAM,UAAWH,EAC3B,SAAA,CAAAH,EAAAA,IAACY,EAAA,EAAO,EACPpB,CAAAA,CAAAA,CACH,CAAA,CACF,CAEJ,CAEO,SAASqB,EAAaC,EAA8B,CACzD,OACEd,EAAAA,IAACe,EAAA,CACC,SAAAf,EAAAA,IAACgB,EAAA,CAAM,KAAK,QAAQ,QAAShB,EAAAA,IAAClB,EAAA,IAA0BgC,CAAAA,GAAU,EACpE,CAEJ,CAEO,SAASG,EAAiB,CAC/BC,GAAAA,EACAC,KAAAA,CACkC,EAAG,CACrC,MAAMvB,EAAkBC,EACtBC,EAAYC,GAAUA,EAAMH,eAAe,CAC7C,EAEMwB,EAAaC,EAAAA,YAAY,IAAM,CACnCzB,EAAgB,CAAC,CACnB,EAAG,CAACA,CAAe,CAAC,EAEpB,OACEI,EAAAA,IAACsB,GAAK,GAAAJ,EAAQ,QAASE,EACrB,SAAApB,EAAAA,IAACuB,EAAA,CAAMJ,WAAK,CAAA,CACd,CAEJ"}