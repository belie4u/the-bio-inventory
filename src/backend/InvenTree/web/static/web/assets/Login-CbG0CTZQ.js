import{cu as V,j as s,G as u,bK as _,i,bL as y,fd as G,u as p,C as U,fe as E,B as j,c6 as T,bc as B,F as K,A as x,H as z,ff as Q,K as W,bS as J,fg as H,c1 as X,bz as Y,I as $,bQ as A,by as F,fh as Z,f2 as q,fi as ss,bR as g,r as S,L as es,D as ts}from"./vendor-COjCG5sX.js";import{a as ns,d as is}from"./DesktopAppView-DxQJo3T-.js";import{c as L,u as R,N as rs,O as as,Q as os,R as ls}from"./index-ClP83spC.js";import{L as cs,C as ds}from"./LanguageSelect-B65jaXb9.js";import{A as xs}from"./AuthenticationForm-xfrrPloR.js";import{A as C}from"./ActionButton-DLsRvAT1.js";import{Wrapper as O}from"./Layout-Ka7T8P9L.js";import{u as us}from"./use-form-CbK8oI2R.js";import{a as js,u as hs}from"./ThemeContext-B85sS1BU.js";import"./Alerts-CLrw5Hg_.js";import"./links-hXCah-cC.js";function ms(){const[t,l]=V();return s.jsxs(u,{justify:"center",style:{border:t===!0?"1px dashed":"",margin:t===!0?2:12,padding:t===!0?8:0},"aria-label":"Open language options",children:[s.jsx(_,{label:i._({id:"k/sb6z"}),children:s.jsx(y,{onClick:()=>l.toggle(),size:"lg",variant:"transparent","aria-label":"Language toggle",children:s.jsx(G,{})})}),t&&s.jsx(u,{children:s.jsx(cs,{})})]})}function gs({hostname:t,toggleHostEdit:l}){const[e]=L(p(o=>[o.server]));return s.jsx(U,{mx:"md",children:s.jsxs(u,{children:[s.jsx(ds,{}),s.jsx(ms,{}),window.INVENTREE_SETTINGS.show_server_selector&&s.jsx(_,{label:t,children:s.jsx(y,{size:"lg",variant:"transparent",onClick:l,children:s.jsx(E,{})})}),s.jsxs(j,{c:"dimmed",children:[e.version," | ",e.apiVersion]})]})})}function ps({data:t,saveOptions:l}){const e=us({initialValues:t});function o(n){const h=e.values;delete h[n],e.setValues(h)}const c=Object.entries(e.values).map(([n])=>s.jsx(u,{mt:"xs",children:e.values[n]!==void 0&&s.jsxs(s.Fragment,{children:[s.jsx(T,{placeholder:i._({id:"Ai2U7L"}),withAsterisk:!0,style:{flex:1},...e.getInputProps(`${n}.host`)}),s.jsx(T,{placeholder:i._({id:"6YtxFj"}),withAsterisk:!0,style:{flex:1},...e.getInputProps(`${n}.name`)}),s.jsx(y,{color:"red",onClick:()=>{o(n)},variant:"default",children:s.jsx(B,{})})]})},n));return s.jsx("form",{onSubmit:e.onSubmit(l),children:s.jsxs(K,{style:{maxWidth:500},mx:"auto",children:[c.length>0?s.jsxs(u,{mb:"xs",children:[s.jsx(j,{fw:500,size:"sm",style:{flex:1},children:s.jsx(x,{id:"Ai2U7L"})}),s.jsx(j,{fw:500,size:"sm",style:{flex:1},children:s.jsx(x,{id:"6YtxFj"})})]}):s.jsx(j,{c:"dimmed",ta:"center",children:s.jsx(x,{id:"yWMzcH"})}),c,s.jsxs(u,{mt:"md",children:[s.jsxs(z,{onClick:()=>e.setFieldValue(`${W()}`,{name:"",host:""}),children:[s.jsx(Q,{}),s.jsx(x,{id:"UYWLpE"})]}),s.jsx(J,{style:{flex:1}}),s.jsx(z,{type:"submit",children:s.jsx(x,{id:"tfDRzk"})})]})]})})}function fs({hostKey:t,ChangeHost:l,setHostEdit:e}){const[o,c]=H([!1,!0]),[n,h,m]=R(p(a=>[a.setHost,a.setHostList,a.hostList])),I=Object.keys(m).map(a=>{var d;return{value:a,label:(d=m[a])==null?void 0:d.name}});function b(a){h(a),a[t]===void 0&&n("",""),c()}return s.jsxs(O,{titleText:i._({id:"/PzyUK"}),smallPadding:!0,children:[s.jsxs(u,{gap:"xs",justify:"space-between",wrap:"nowrap",children:[s.jsx(X,{style:{width:"100%"},value:t,onChange:l,data:I,disabled:o}),s.jsxs(u,{gap:"xs",wrap:"nowrap",children:[s.jsx(_,{label:i._({id:"AA2j+t"}),position:"top",children:s.jsx(C,{variant:"transparent",disabled:o,onClick:c,icon:s.jsx(Y,{})})}),s.jsx(_,{label:i._({id:"sKRtVy"}),position:"top",children:s.jsx(C,{variant:"transparent",onClick:e,disabled:o,icon:s.jsx($,{}),color:"green"})})]})]}),o?s.jsxs(s.Fragment,{children:[s.jsx(A,{my:"sm"}),s.jsx(j,{children:s.jsx(x,{id:"AA2j+t"})}),s.jsx(ps,{data:m,saveOptions:b})]}):s.jsxs(s.Fragment,{children:[s.jsx(A,{my:"sm"}),s.jsx(bs,{hostList:m,hostKey:t})]})]})}function bs({hostList:t,hostKey:l}){var c;const[e]=L(p(n=>[n.server])),o=[{key:"server",label:i._({id:"sGH11W"}),value:(c=t[l])==null?void 0:c.host,icon:s.jsx(E,{})},{key:"name",label:i._({id:"6YtxFj"}),value:e.instance,icon:s.jsx(F,{})},{key:"version",label:i._({id:"eE0JZ4"}),value:e.version,icon:s.jsx(F,{})},{key:"api",label:i._({id:"8XeFzA"}),value:e.apiVersion,icon:s.jsx(Z,{})},{key:"plugins",label:i._({id:"ohUJJM"}),value:e.plugins_enabled?i._({id:"RxzN1M"}):i._({id:"E/QGRL"}),icon:s.jsx(q,{}),color:e.plugins_enabled?"green":"red"},{key:"worker",label:i._({id:"3J7l5w"}),value:e.worker_running?i._({id:"RiQMUh"}):i._({id:"NnvXp5"}),icon:s.jsx(ss,{}),color:e.worker_running?"green":"red"}];return s.jsx(g,{striped:!0,p:"xs",children:s.jsx(g.Tbody,{children:o.map(n=>s.jsxs(g.Tr,{p:2,children:[s.jsx(g.Td,{children:s.jsx(y,{size:"xs",variant:"transparent",color:n.color,children:n.icon})}),s.jsx(g.Td,{children:s.jsx(j,{size:"sm",children:n.label})}),s.jsx(g.Td,{children:s.jsx(j,{size:"sm",children:n.value})})]},n.key))})})}function Fs(){var w;const[t,l,e]=R(p(r=>[r.hostKey,r.setHost,r.hostList])),[o,c]=L(p(r=>[r.server,r.fetchServerApiState])),[n,h]=S.useState(!1),m=e[t]===void 0?i._({id:"bX1aQ5"}):(w=e[t])==null?void 0:w.name,[I,b]=H([!1,!0]),a=js(),d=hs(),[v]=ns(),[P,M]=L(p(r=>[r.sso_registration_enabled,r.registration_enabled])),N=M()||P()||!1,D=S.useMemo(()=>{var f;const r=(f=o.customize)==null?void 0:f.login_message;return r==null?null:s.jsxs(s.Fragment,{children:[s.jsx(A,{my:"md"}),s.jsx(j,{children:s.jsx("span",{dangerouslySetInnerHTML:{__html:r}})})]})},[o.customize]);function k(r){var f;r!==null&&(l((f=e[r])==null?void 0:f.host,r),ls(),c())}return S.useEffect(()=>{t===""&&k(is),rs(a,d==null?void 0:d.state,!0),v.has("login")&&v.has("password")&&(h(!0),as(v.get("login")??"",v.get("password")??"",a).then(()=>{os(a,d==null?void 0:d.state)}))},[]),s.jsx(s.Fragment,{children:I?s.jsx(fs,{hostKey:t,ChangeHost:k,setHostEdit:b}):s.jsxs(s.Fragment,{children:[s.jsx(O,{titleText:i._({id:"z0t9bb"}),smallPadding:!0,children:n?s.jsxs(s.Fragment,{children:[s.jsx(u,{justify:"center",children:s.jsx(es,{})}),s.jsx(x,{id:"wIGnZX"})]}):s.jsxs(s.Fragment,{children:[s.jsx(xs,{}),N&&s.jsxs(j,{ta:"center",size:"xs",mt:"md",children:[s.jsx(x,{id:"ln9/n9"})," ",s.jsx(ts,{component:"button",type:"button",c:"dimmed",size:"xs",onClick:()=>a("/register"),children:s.jsx(x,{id:"fgLNSM"})})]}),D," "]})}),s.jsx(gs,{hostname:m,toggleHostEdit:b})]})})}export{Fs as default};
//# sourceMappingURL=Login-CbG0CTZQ.js.map
