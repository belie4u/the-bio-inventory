import{r as i,cJ as h,bP as k}from"./vendor-COjCG5sX.js";import{A as f,a as E,e as g}from"./index-ClP83spC.js";import{x as M}from"./UseForm-DUtLE7-5.js";function y(e){const n=M(),[r,a]=i.useState(null),[d,o]=i.useState({}),[c]=h(d,100),b=i.useCallback(()=>{var t;return!(((t=e.isEnabled)==null?void 0:t.call(e))==!1||e.modalId&&!n.isModalOpen(e.modalId))},[n.isModalOpen,n.openModals,e.isEnabled,e.modalId]),m=i.useCallback((t,u)=>{o(u?t:l=>({...l,...t}))},[]);return k({enabled:!0,queryKey:["generator",e.key,e.endpoint,e.modalId,e.initialQuery,n.openModals,c],refetchOnMount:!1,refetchOnWindowFocus:!1,throwOnError:t=>(console.error(`Error generating ${e.key} @ ${e.endpoint}:`,t),!1),queryFn:async()=>{const t={...e.initialQuery??{},...c};return b()?E.post(g(e.endpoint),t).then(u=>{var s;const l=u==null?void 0:u.data[e.key];return a(l),(s=e.onGenerate)==null||s.call(e,l),u}):(a(null),null)}}),{query:d,update:m,result:r}}function S({initialQuery:e,onGenerate:n,isEnabled:r,modalId:a}){return y({endpoint:f.generate_batch_code,key:"batch_code",initialQuery:e,onGenerate:n,isEnabled:r,modalId:a})}function G({initialQuery:e,onGenerate:n,isEnabled:r,modalId:a}){return y({endpoint:f.generate_serial_number,key:"serial_number",initialQuery:e,onGenerate:n,isEnabled:r,modalId:a})}export{G as a,S as u};
//# sourceMappingURL=UseGenerator-CdxkBrcC.js.map
